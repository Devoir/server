var app=angular.module("app",["controllers"]);$(document).ready(function(){function addCourse(){var eventlist=[],calendarId="https://learningsuite.byu.edu/iCalFeed/ical.php?courseID=HD832sKIIdzI",courseId=5;$.ajax({type:"POST",url:"/api/courses/"+courseId+"/tasks/import",data:{icalFeed:calendarId},success:function(data1){for(var d in data1)eventlist.push({title:data1[d].description,start:data1[d].start,allDay:!1});console.log("course populated");var course={color:"yellow",textColor:"black",events:eventlist};$("#calendar").fullCalendar("addEventSource",course)}})}$("#calendar").fullCalendar({eventSources:[]}),$("#addbutton").click(function(){console.log("add");addCourse();console.log("after add")})});var controllers=controllers||angular.module("controllers",["ui.calendar","ui.bootstrap"]);controllers.controller("calendarCtrl",["$scope","$compile","uiCalendarConfig","$http",function($scope,$compile,uiCalendarConfig,$http){console.log("calendarCtrl loaded");var date=new Date,m=date.getMonth(),y=date.getFullYear();$scope.calendarId="https://learningsuite.byu.edu/iCalFeed/ical.php?courseID=HD832sKIIdzI",$scope.courses=[],$scope.getCalendar=function(){$scope.loadingFeed=!0;var course={color:"#f00",textcolor:"black",events:[]},courseId=5;$http.post("/api/courses/"+courseId+"/tasks/import",{icalFeed:$scope.calendarId}).success(function(data){for(var d in data)course.events.push({title:data[d].description,start:new Date(data[d].start),allDay:!1});course.events.push({title:"All Day Event",start:new Date(y,m,1)}),$scope.courses.push(course),$scope.loadingFeed=!1}).error(function(data,status){$scope.error={data:data,status:status},$scope.loadingFeed=!1})},$scope.events=[],$scope.alertOnEventClick=function(date){$scope.alertMessage=date.title+" was clicked "},$scope.changeView=function(view,calendar){uiCalendarConfig.calendars[calendar].fullCalendar("changeView",view)},$scope.renderCalender=function(calendar){uiCalendarConfig.calendars[calendar]&&uiCalendarConfig.calendars[calendar].fullCalendar("render")},$scope.eventRender=function(event,element){element.attr({tooltip:event.title,"tooltip-append-to-body":!0}),$compile(element)($scope)},$scope.uiConfig={calendar:{height:450,editable:!0,header:{left:"title",center:"",right:"today prev,next"},eventClick:$scope.alertOnEventClick,eventDrop:$scope.alertOnDrop,eventResize:$scope.alertOnResize,eventRender:$scope.eventRender}},$scope.eventSources=[$scope.events,$scope.courses]}]);var controllers=controllers||angular.module("controllers",[]);controllers.controller("homeCtrl",["$scope","$http",function(){console.log("homeCtrl loaded")}]);var controllers=controllers||angular.module("controllers",[]);controllers.controller("taskViewCtrl",["$scope","$http",function($scope,$http){console.log("taskViewCtrl loaded"),$scope.calendarId="https://learningsuite.byu.edu/iCalFeed/ical.php?courseID=HD832sKIIdzI",$scope.getCalendar=function(){$scope.loadingFeed=!0,$scope.events=[];var courseId=5;$http.post("/api/courses/"+courseId+"/tasks/import",{icalFeed:$scope.calendarId}).success(function(data){for(var d in data)$scope.events.push(data[d]);$scope.loadingFeed=!1}).error(function(data,status){$scope.error={data:data,status:status},$scope.loadingFeed=!1}),$http.get("/api/courses/"+courseId+"/tasks/").success(function(data){for(var d in data)$scope.events.push(data[d]);$scope.loadingFeed=!1})},$scope.checkOff=function(event){event.done=!event.done},$scope.courses=[{name:"Course",color:"#ccc"},{name:"Course",color:"#ccc"},{name:"Course",color:"#ccc"},{name:"Course",color:"#ccc"},{name:"Course",color:"#ccc"}]}]);